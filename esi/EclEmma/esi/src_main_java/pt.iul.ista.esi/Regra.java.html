<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pt"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>Regra.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">AllTests (1) (13/dez/2019 22:45:25)</a> &gt; <a href="../../index.html" class="el_group">esi</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">pt.iul.ista.esi</a> &gt; <span class="el_source">Regra.java</span></div><h1>Regra.java</h1><pre class="source lang-java linenums">/**
*
* Trabalho final de Engenharia de Software I 2019/20
* 
* Grupo 85
* 
* Projecto Analise de erros de software.
* 
* Classe Regra.
*
* @author Miguel Diaz Gonçalves 82493
* @author Gonçalo Dias do Amaral 83380
* @author Miguel Carriço 73745
* @author André Freitas 82361
* @author Pedro Jones 82946
* @version 0.01
*
*/

package pt.iul.ista.esi;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class Regra {

	private String nome;
	private String expressao;

	/**
	 * 
	 * Construtor para o Objecto Regra
	 *
	 * @param nome      String nome da regra.
	 * @param expressao String expressão logica para calculo da regra.
	 * 
	 */
<span class="fc" id="L39">	public Regra(String nome, String expressao) {</span>

<span class="fc" id="L41">		this.nome = nome;</span>
<span class="fc" id="L42">		this.expressao = expressao;</span>
<span class="fc" id="L43">	}</span>

	/**
	 * 
	 * Getter para o nome da regra.
	 *
	 * @return String nome da regra.
	 * 
	 */
	public String getNome() {
<span class="fc" id="L53">		return nome;</span>
	}

	/**
	 * 
	 * Getter para a expressao de calculo da regra.
	 *
	 * @return String expressao de calculo da regra.
	 * 
	 */
	public String getExpressao() {
<span class="fc" id="L64">		return expressao;</span>
	}

	/**
	 * 
	 * Setter para o nome da regra.
	 *
	 * @param nome String nome da regra.
	 * 
	 */
	public void setNome(String nome) {
<span class="fc" id="L75">		this.nome = nome;</span>
<span class="fc" id="L76">	}</span>

	/**
	 * 
	 * Setter para a expressao de calculo da regra.
	 *
	 * @param expressao String expressao de calculo da regra.
	 * 
	 */
	public void setExpressao(String expressao) {
<span class="fc" id="L86">		this.expressao = expressao;</span>
<span class="fc" id="L87">	}</span>

	/**
	 * 
	 * toString para o objeto regra.
	 *
	 * @return String informação acerca da regra 
	 * 
	 */
	@Override
	public String toString() {
<span class="fc" id="L98">		return this.nome + &quot;;&quot; + this.expressao;</span>
	}

	/**
	 * 
	 * equals para comparar duas regras.
	 *
	 * @param objecto Object para comparar.

	 * @return boolean verdadeiro se as regras forem iguais falso caso contrário
	 * 
	 */
	@Override
	public boolean equals(Object objecto) {
		
		// Se é ele proprio return true   
<span class="fc bfc" id="L114" title="All 2 branches covered.">        if (objecto == this) { </span>
<span class="fc" id="L115">            return true; </span>
        } 
  
        // Testa se é uma regra
<span class="fc bfc" id="L119" title="All 2 branches covered.">        if (!(objecto instanceof Regra)) { </span>
<span class="fc" id="L120">            return false; </span>
        } 
          
        // typecast para Regra para poder comparar  
<span class="fc" id="L124">        Regra regra = (Regra) objecto; </span>
          
        // Compara os atibutos  
<span class="fc bfc" id="L127" title="All 4 branches covered.">        return this.nome.equals(regra.getNome()) &amp;&amp; this.expressao.equals(regra.getExpressao()); </span>
    }

	/**
	 * 
	 * Calcula o resultado da regra para os valores fornecidos
	 * 
	 * @param metodo Metodo O metodo a analisar.
	 *
	 * @return Boolean resultado do calculo da regra.
	 * 
	 * @throws ScriptException caso a regra seja invalida
	 * 
	 */
	public boolean calcula(Metodo metodo) throws ScriptException {
<span class="fc" id="L142">		String toTest = expressao;</span>
<span class="fc" id="L143">		int loc = metodo.getLoc();</span>
<span class="fc" id="L144">		int cyclo = metodo.getCyclo();</span>
<span class="fc" id="L145">		int atfd = metodo.getAtfd();</span>
<span class="fc" id="L146">		double laa = metodo.getLaa();</span>

<span class="fc bfc" id="L148" title="All 2 branches covered.">		if (toTest.contains(&quot;LOC&quot;))</span>
<span class="fc" id="L149">			toTest = toTest.replace(&quot;LOC&quot;, Integer.toString(loc));</span>
<span class="fc bfc" id="L150" title="All 2 branches covered.">		if (toTest.contains(&quot;CYCLO&quot;))</span>
<span class="fc" id="L151">			toTest = toTest.replace(&quot;CYCLO&quot;, Integer.toString(cyclo));</span>
<span class="fc bfc" id="L152" title="All 2 branches covered.">		if (toTest.contains(&quot;ATFD&quot;))</span>
<span class="fc" id="L153">			toTest = toTest.replace(&quot;ATFD&quot;, Integer.toString(atfd));</span>
<span class="fc bfc" id="L154" title="All 2 branches covered.">		if (toTest.contains(&quot;LAA&quot;))</span>
<span class="fc" id="L155">			toTest = toTest.replace(&quot;LAA&quot;, Double.toString(laa));</span>

<span class="fc" id="L157">		ScriptEngine engine = new ScriptEngineManager().getEngineByName(&quot;JavaScript&quot;);</span>
<span class="fc" id="L158">		boolean result = (boolean) engine.eval(toTest);</span>

<span class="fc" id="L160">	return result;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span>AllTests (1) (13/dez/2019 22:45:25)</div></body></html>